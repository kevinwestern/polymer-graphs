<link rel="import" href="bower_components/polymer/polymer.html">

<polymer-element name="org-kw-barchart"
    attributes="xyData heading">
  <template>
    <h2>{{heading}}</h2>
    <div id="graph"></div>
  </template>
  <script src="bower_components/d3/d3.min.js"></script>
  <script>
    Polymer('org-kw-barchart', {
      ready: function() {
        this.heading = 'A graph';
        this.xyData = [];
        this.svg = d3.select(this.$.graph);
      },
      xyDataChanged: function(previousData, newData) {
        this.draw(newData);
      },
      draw: function(xyData) {
        var bars = this.svg.selectAll('.bar').data(xyData);
        bars.enter().
          append('div').
          style('height', '20px').
          style('margin-top', '10px').
          attr('class', 'bar');

        // update
        bars.style('width', function(d) { return d.y + 'px'; });

        // remove
        bars.exit().remove();  
      }
    });
  </script>
</polymer-element>